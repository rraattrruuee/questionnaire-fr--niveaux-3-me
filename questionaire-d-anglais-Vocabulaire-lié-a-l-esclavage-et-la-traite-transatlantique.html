<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/quiz_icon.svg" type="image/x-icon" />
        <title>
            Quiz d'anglais - Vocabulaire lié à l'esclavage et la traite
            transatlantique
        </title>
        <style>
            /* ----------------------------------------------------
           ANIMATIONS (KEYFRAMES)
           ---------------------------------------------------- */
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideOut {
                from {
                    opacity: 1;
                    transform: translateY(0);
                }
                to {
                    opacity: 0;
                    transform: translateY(-10px);
                }
            }

            @keyframes headerDrop {
                from {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                    box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
                }
                50% {
                    transform: scale(1.02);
                    box-shadow: 0 8px 20px rgba(76, 81, 191, 0.5);
                }
                100% {
                    transform: scale(1);
                    box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
                }
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            @keyframes resultsEntry {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes bounce {
                0%,
                20%,
                50%,
                80%,
                100% {
                    transform: translateY(0);
                }
                40% {
                    transform: translateY(-5px);
                }
                60% {
                    transform: translateY(-3px);
                }
            }

            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                20%,
                60% {
                    transform: translateX(-5px);
                }
                40%,
                80% {
                    transform: translateX(5px);
                }
            }

            @keyframes glowCorrect {
                0% {
                    box-shadow: 0 0 5px #68d391;
                }
                50% {
                    box-shadow: 0 0 20px #48bb78;
                }
                100% {
                    box-shadow: 0 0 5px #68d391;
                }
            }

            @keyframes zoomFeedback {
                0% {
                    transform: scale(0.9);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            @keyframes couleur-qui-change {
                0%,
                10% {
                    color: white;
                }
                30% {
                    color: #00ff00;
                }
                38% {
                    color: #ffff00;
                }
                46% {
                    color: #ff00ff;
                }
                54% {
                    color: #00ffff;
                }
                60% {
                    color: #ffa500;
                }
                68% {
                    color: #7cfc00;
                }
                76% {
                    color: #ff69b4;
                }
                84% {
                    color: #8a2be2;
                }
                92% {
                    color: #ff4500;
                }
                100% {
                    color: deeppink;
                }
            }

            @keyframes rotate {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }

            @keyframes flicker {
                0%,
                100% {
                    opacity: 1;
                }
                5%,
                25%,
                45%,
                65%,
                85% {
                    opacity: 0.85;
                }
                10%,
                30%,
                50%,
                70%,
                90% {
                    opacity: 1;
                }
            }

            @keyframes wipe-in {
                from {
                    clip-path: inset(0 100% 0 0);
                }
                to {
                    clip-path: inset(0 0 0 0);
                }
            }

            @keyframes border-fade {
                0% {
                    border-color: #3182ce;
                }
                33% {
                    border-color: #48bb78;
                }
                66% {
                    border-color: #f6ad55;
                }
                100% {
                    border-color: #3182ce;
                }
            }

            @keyframes clignotement-leger {
                0%,
                100% {
                    color: red;
                    opacity: 1;
                }
                50% {
                    color: orange;
                    opacity: 0.7;
                }
            }

            /* ----------------------------------------------------
           STYLE GÉNÉRAL
           ---------------------------------------------------- */
            body {
                font-family: Arial, Helvetica, sans-serif;
                background-color: #f0f4f8;
                padding: 1rem;
                line-height: 1.6;
                min-height: 100vh;
            }

            @media (min-width: 768px) {
                body {
                    padding: 2rem;
                }
            }

            .quiz-container {
                max-width: 800px;
                margin: 2rem auto;
                padding: 2rem;
                background: #ffffff;
                border-radius: 20px;
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            }

            .header {
                text-align: center;
                margin-bottom: 2rem;
            }

            .header h1 {
                font-size: 2rem;
                font-weight: 700;
                color: #1a202c;
                margin-bottom: 0.5rem;
                animation: headerDrop 0.8s ease-out;
            }

            .header p {
                color: #4a5568;
                font-size: 1.125rem;
                font-weight: 500;
            }

            .question-card {
                min-height: 250px;
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border-radius: 15px;
                background-color: #f7faff;
                border: 2px solid #e2e8f0;
                transition:
                    opacity 0.3s ease,
                    transform 0.3s ease;
            }

            .question-card.entering {
                animation: slideIn 0.5s ease-out forwards;
            }

            .question-card.fast-exit {
                animation: slideOut 0.25s ease-in forwards; /* Rapide pour le succès */
            }
            .question-card.slow-exit {
                animation: slideOut 0.8s ease-in forwards; /* Lent pour l'échec */
            }

            .question-text {
                font-size: 1.3rem;
                font-weight: 700;
                margin-bottom: 1.5rem;
                color: #2d3748;
            }

            .options-container {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .answer-btn {
                display: block;
                width: 100%;
                padding: 1rem 1.25rem;
                text-align: left;
                border-radius: 10px;
                transition: all 0.2s ease-out;
                font-weight: 600;
                border: 1px solid #c3dafe;
                color: #2b6cb0;
                background-color: #ebf4ff;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            }

            .answer-btn:hover:not(.selected):not(.correct):not(.incorrect) {
                background-color: #cee0f2;
                transform: translateY(-1px);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }

            .selected {
                background-color: #3182ce;
                border-color: #2c5282;
                color: white;
                transform: scale(1.01);
                box-shadow: 0 5px 15px rgba(49, 130, 206, 0.4);
            }

            .correct {
                background-color: #48bb78 !important;
                border-color: #2f855a !important;
                color: white !important;
                box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
                pointer-events: none;
                animation: bounce 0.6s ease-out;
            }

            .incorrect {
                background-color: #f56565 !important;
                border-color: #c53030 !important;
                color: white !important;
                box-shadow: 0 5px 15px rgba(245, 101, 101, 0.4);
                pointer-events: none;
                animation: shake 0.5s ease-in-out;
            }

            #feedback-area {
                margin-top: 1rem;
                padding: 1rem;
                border-radius: 10px;
                font-weight: 600;
                text-align: center;
                animation: zoomFeedback 0.4s
                    cubic-bezier(0.68, -0.55, 0.27, 1.55);
            }

            .feedback-correct {
                background-color: #e6fffa;
                color: #38a169;
                border: 1px solid #48bb78;
            }

            .feedback-incorrect {
                background-color: #fff5f5;
                color: #e53e3e;
                border: 1px solid #f56565;
            }
            .main-btn-container {
                margin-top: 2.5rem;
                display: flex;
                justify-content: center;
            }

            #main-btn {
                background-color: #4c51bf;
                color: white;
                padding: 1rem 2.5rem;
                border-radius: 12px;
                font-weight: 800;
                font-size: 1.1rem;
                transition:
                    background-color 0.3s,
                    transform 0.2s,
                    box-shadow 0.3s;
                width: 100%;
                border: none;
                cursor: pointer;
                box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
            }

            @media (min-width: 768px) {
                #main-btn {
                    width: auto;
                }
            }

            #main-btn:hover:not(:disabled) {
                background-color: #3a4294;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(76, 81, 191, 0.4);
            }

            #main-btn:active:not(:disabled) {
                animation: pulse 0.3s ease;
            }

            #main-btn:disabled {
                background-color: #a0aec0;
                cursor: not-allowed;
                box-shadow: none;
            }

            #results {
                margin-top: 2.5rem;
                padding: 2rem;
                background-color: #f0fff4;
                border: 2px solid #68d391;
                border-radius: 15px;
                text-align: center;
            }

            #results.entering {
                animation: resultsEntry 0.6s ease-out forwards;
            }

            .high-score-glow {
                animation: glowCorrect 2s infinite alternate;
            }

            #results h2 {
                font-size: 1.8rem;
                font-weight: 700;
                color: #2f855a;
                margin-bottom: 1rem;
            }

            #score-display {
                font-size: 1.4rem;
                font-weight: 600;
                margin-bottom: 0.75rem;
                color: #38a169;
            }

            #feedback-message {
                font-size: 1.1rem;
                color: #4c51bf;
            }

            #results button {
                margin-top: 1.5rem;
                padding: 0.75rem 2rem;
                background-color: #48bb78;
                color: white;
                border-radius: 10px;
                font-weight: 700;
                transition: background-color 0.2s;
                border: none;
                cursor: pointer;
            }

            #results button:hover {
                background-color: #38a169;
            }

            .hidden {
                display: none;
            }

            .couleur-qui-change {
                animation: couleur-qui-change 14s infinite alternate;
                font-weight: bold;
            }

            .anim-rotate {
                animation: rotate 5s linear infinite;
            }

            .anim-flicker {
                animation: flicker 0.15s linear infinite alternate;
            }

            .anim-wipe-in {
                animation: wipe-in 1s ease-out forwards;
            }

            .anim-border-fade {
                border: 3px solid transparent;
                animation: border-fade 3s ease-in-out infinite;
            }

            .clignotant {
                animation: clignotement-leger 1.5s infinite ease-in-out;
            }
        </style>
    </head>
    <body>
        <div class="quiz-container anim-border-fade">
            <header class="header">
                <h1>
                    Quiz <span class="couleur-qui-change">d'anglais</span
                    ><span class="clignotant"> : 16</span> Questions sur <br />
                    - Le vocabulaire lié à l'esclavage et la traite
                </h1>
                <p>
                    Question <span id="current-q-number">1</span> /
                    <span id="total-q-number">50</span>
                </p>
            </header>

            <div id="quiz-area" class="anim-wipe-in">
                <div id="current-question-card" class="question-card"></div>

                <div id="feedback-area" class="hidden"></div>

                <div class="main-btn-container">
                    <button id="main-btn" onclick="checkAnswerAndProceed()">
                        Valider la Réponse
                    </button>
                </div>
            </div>

            <div id="results" class="hidden">
                <h2 class="anim-flicker">Quiz Terminé !</h2>
                <p id="score-display"></p>
                <p id="feedback-message"></p>
                <button onclick="restartQuiz()">Recommencer le Quiz</button>
            </div>
        </div>

        <script>
            // --- DATA: ---
            const questions = [
                {
                    q: "PEOPLE: enslaved people / slaves",
                    answers: [
                        "Personnes qui achètent et vendent des personnes réduites en esclavage à des fins lucratives",
                        "Personnes forcées de travailler sans liberté ni rémunération, considérées comme des biens",
                        "Personnes qui s'installent dans un nouveau territoire et y établissent leur pouvoir",
                    ],
                    correct:
                        "Personnes forcées de travailler sans liberté ni rémunération, considérées comme des biens",
                },
                {
                    q: "PEOPLE: slave traders",
                    answers: [
                        "Personnes qui possèdent légalement des personnes réduites en esclavage et contrôlent leur vie",
                        "Personnes qui achètent et vendent des personnes réduites en esclavage à des fins lucratives",
                        "Personnes qui s'installent dans un nouveau territoire et y établissent leur pouvoir",
                    ],
                    correct:
                        "Personnes qui achètent et vendent des personnes réduites en esclavage à des fins lucratives",
                },
                {
                    q: "PEOPLE: colonists",
                    answers: [
                        "Personnes forcées de travailler sans liberté ni rémunération, considérées comme des biens",
                        "Personnes qui achètent et vendent des personnes réduites en esclavage à des fins lucratives",
                        "Personnes qui s'installent dans un nouveau territoire et y établissent leur pouvoir",
                    ],
                    correct:
                        "Personnes qui s'installent dans un nouveau territoire et y établissent leur pouvoir",
                },
                {
                    q: "PEOPLE: masters / owners",
                    answers: [
                        "Personnes qui achètent et vendent des personnes réduites en esclavage à des fins lucratives",
                        "Personnes qui possèdent légalement des personnes réduites en esclavage et contrôlent leur vie",
                        "Personnes forcées de travailler sans liberté ni rémunération, considérées comme des biens",
                    ],
                    correct:
                        "Personnes qui possèdent légalement des personnes réduites en esclavage et contrôlent leur vie",
                },
                {
                    q: "TRANSPORT: slave ship / vessel",
                    answers: [
                        "Navire spécifiquement utilisé pour transporter des personnes réduites en esclavage à travers l'océan",
                        "Produits fabriqués en usine, comme des outils, des vêtements ou des armes",
                        "Voyager à travers l'eau dans un navire ou un bateau",
                    ],
                    correct:
                        "Navire spécifiquement utilisé pour transporter des personnes réduites en esclavage à travers l'océan",
                },
                {
                    q: "TRANSPORT: to sail",
                    answers: [
                        "Échanger des marchandises ou des services",
                        "Descendre d'un navire ou d'un bateau",
                        "Voyager à travers l'eau dans un navire ou un bateau",
                    ],
                    correct:
                        "Voyager à travers l'eau dans un navire ou un bateau",
                },
                {
                    q: "TRANSPORT: cargo",
                    answers: [
                        "Articles qui peuvent être achetés ou vendus",
                        "Marchandises ou personnes transportées sur un navire",
                        "Ressources naturelles utilisées pour fabriquer des produits",
                    ],
                    correct:
                        "Marchandises ou personnes transportées sur un navire",
                },
                {
                    q: "TRANSPORT: goods",
                    answers: [
                        "Articles qui peuvent être achetés ou vendus",
                        "Un voyage d'un endroit à un autre",
                        "Descendre d'un navire ou d'un bateau",
                    ],
                    correct: "Articles qui peuvent être achetés ou vendus",
                },
                {
                    q: "TRANSPORT: journey",
                    answers: [
                        "Échanger des marchandises ou des services",
                        "Un voyage d'un endroit à un autre",
                        "Navire spécifiquement utilisé pour transporter des personnes",
                    ],
                    correct: "Un voyage d'un endroit à un autre",
                },
                {
                    q: "TRANSPORT: manufactured goods",
                    answers: [
                        "Ressources naturelles utilisées pour fabriquer des produits",
                        "Produits fabriqués en usine, comme des outils, des vêtements ou des armes",
                        "Articles qui peuvent être achetés ou vendus",
                    ],
                    correct:
                        "Produits fabriqués en usine, comme des outils, des vêtements ou des armes",
                },
                {
                    q: "TRANSPORT: raw materials",
                    answers: [
                        "Produits fabriqués en usine",
                        "Ressources naturelles utilisées pour fabriquer des produits, comme le coton, le sucre ou le tabac",
                        "Articles qui peuvent être achetés ou vendus",
                    ],
                    correct:
                        "Ressources naturelles utilisées pour fabriquer des produits, comme le coton, le sucre ou le tabac",
                },
                {
                    q: "TRANSPORT: to disembark",
                    answers: [
                        "Voyager à travers l'eau dans un navire",
                        "Échanger des marchandises ou des services",
                        "Descendre d'un navire ou d'un bateau",
                    ],
                    correct: "Descendre d'un navire ou d'un bateau",
                },
                {
                    q: "TRANSPORT: to trade",
                    answers: [
                        "Échanger des marchandises ou des services",
                        "Descendre d'un navire ou d'un bateau",
                        "Voyager à travers l'eau dans un navire",
                    ],
                    correct: "Échanger des marchandises ou des services",
                },
                {
                    q: "CONDITIONS: crowded",
                    answers: [
                        "Rempli de trop de personnes dans un petit espace",
                        "Cruel et manquant de compassion ou d'humanité",
                        "Attaché ou lié avec des chaînes métalliques",
                    ],
                    correct: "Rempli de trop de personnes dans un petit espace",
                },
                {
                    q: "CONDITIONS: chained",
                    answers: [
                        "Rempli de trop de personnes dans un petit espace",
                        "Attaché ou lié avec des chaînes métalliques",
                        "Cruel et manquant de compassion ou d'humanité",
                    ],
                    correct: "Attaché ou lié avec des chaînes métalliques",
                },
                {
                    q: "CONDITIONS: inhumane",
                    answers: [
                        "Rempli de trop de personnes dans un petit espace",
                        "Attaché ou lié avec des chaînes métalliques",
                        "Cruel et manquant de compassion ou d'humanité",
                    ],
                    correct: "Cruel et manquant de compassion ou d'humanité",
                },
            ];

            let currentQuestionIndex = 0;
            let score = 0;
            let userSelection = null;
            let questionsShuffled = [];
            let quizInProgress = false;

            // Fonction pour mélanger un tableau (Algorithme de Fisher-Yates)
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // Affiche la question actuelle
            function renderQuestion() {
                if (currentQuestionIndex >= questionsShuffled.length) {
                    showResults();
                    return;
                }

                const q = questionsShuffled[currentQuestionIndex];
                const card = document.getElementById("current-question-card");
                const questionNumber = currentQuestionIndex + 1;

                card.classList.remove("slow-exit", "fast-exit");
                card.classList.add("entering");

                document.getElementById("current-q-number").textContent =
                    questionNumber;
                document.getElementById("total-q-number").textContent =
                    questionsShuffled.length;
                document.getElementById("main-btn").textContent =
                    "Valider la Réponse";
                document.getElementById("main-btn").disabled = true;

                card.innerHTML = `
                <p class="question-text">${q.q}</p>
                <div id="options-container" class="options-container">
                    <!-- Options de réponse -->
                </div>
            `;

                document
                    .getElementById("feedback-area")
                    .classList.add("hidden");
                document
                    .getElementById("feedback-area")
                    .classList.remove("feedback-correct", "feedback-incorrect");
                userSelection = null;
                quizInProgress = true;

                const optionsContainer =
                    card.querySelector("#options-container");
                const shuffledAnswers = shuffle([...q.answers]);

                shuffledAnswers.forEach((answer) => {
                    const button = document.createElement("button");
                    button.type = "button";
                    button.className = "answer-btn";
                    button.setAttribute("data-answer", answer);
                    button.textContent = answer;
                    button.onclick = function () {
                        selectAnswer(answer, button);
                    };
                    optionsContainer.appendChild(button);
                });

                setTimeout(() => {
                    card.classList.remove("entering");
                }, 500);
            }

            function selectAnswer(answer, clickedButton) {
                if (!quizInProgress) return;

                const optionsContainer =
                    document.getElementById("options-container");
                optionsContainer
                    .querySelectorAll(".answer-btn")
                    .forEach((btn) => {
                        btn.classList.remove("selected");
                    });

                clickedButton.classList.add("selected");

                userSelection = answer;
                document.getElementById("main-btn").disabled = false;
            }

            function checkAnswerAndProceed() {
                if (userSelection === null || !quizInProgress) return;

                quizInProgress = false;
                document.getElementById("main-btn").disabled = true;

                const q = questionsShuffled[currentQuestionIndex];
                const isCorrect = userSelection === q.correct;
                const feedbackArea = document.getElementById("feedback-area");
                const optionsContainer =
                    document.getElementById("options-container");
                const card = document.getElementById("current-question-card");

                feedbackArea.classList.remove("hidden");

                optionsContainer
                    .querySelectorAll(".answer-btn")
                    .forEach((btn) => {
                        const answer = btn.getAttribute("data-answer");
                        btn.classList.remove("selected");

                        if (answer === q.correct) {
                            btn.classList.add("correct");
                        } else if (answer === userSelection && !isCorrect) {
                            btn.classList.add("incorrect");
                        }
                    });

                feedbackArea.classList.remove(
                    "feedback-correct",
                    "feedback-incorrect",
                );

                if (isCorrect) {
                    score++;
                    feedbackArea.textContent =
                        "Bravo ! Réponse correcte. Prochaine question rapidement !";
                    feedbackArea.classList.add("feedback-correct");
                    card.classList.add("fast-exit");
                } else {
                    feedbackArea.textContent = `Faux. La bonne réponse était : ${q.correct}. Prenez le temps de réfléchir.`;
                    feedbackArea.classList.add("feedback-incorrect");
                    card.classList.add("slow-exit");
                }

                // Déterminer la durée du délai de transition
                const delayDuration = isCorrect ? 500 : 3000;

                document.getElementById("main-btn").textContent =
                    "Question Suivante";

                setTimeout(() => {
                    currentQuestionIndex++;

                    if (currentQuestionIndex >= questionsShuffled.length) {
                        document.getElementById("main-btn").textContent =
                            "Voir les Résultats";
                        document.getElementById("main-btn").onclick =
                            showResults;
                        document.getElementById("main-btn").disabled = false;
                    } else {
                        renderQuestion();
                        document.getElementById("main-btn").onclick =
                            checkAnswerAndProceed;
                    }
                }, delayDuration);
            }

            function showResults() {
                document.getElementById("quiz-area").classList.add("hidden");
                const resultsDiv = document.getElementById("results");
                const totalQuestions = questionsShuffled.length;
                const percentage = Math.round((score / totalQuestions) * 100);

                document.getElementById("score-display").textContent =
                    `Votre score final est de ${score} / ${totalQuestions} (${percentage}%)`;

                let feedbackMsg = "";
                resultsDiv.classList.remove("high-score-glow");

                if (percentage === 100) {
                    feedbackMsg =
                        "Félicitations ! Maîtrise parfaite de la génétique. Vous êtes prêt(e) !";
                    resultsDiv.classList.add("high-score-glow");
                } else if (percentage >= 80) {
                    feedbackMsg =
                        "Excellent travail ! Vous avez une très bonne compréhension des notions.";
                    resultsDiv.classList.add("high-score-glow");
                } else if (percentage >= 60) {
                    feedbackMsg =
                        "Bon effort ! Revoyez les thèmes où vous avez eu le plus d'erreurs.";
                } else {
                    feedbackMsg =
                        "N'abandonnez pas. Reprenez les sections I, III et V de votre fiche pour consolider les bases.";
                }
                document.getElementById("feedback-message").textContent =
                    feedbackMsg;
                resultsDiv.classList.remove("hidden");

                resultsDiv.classList.add("entering");

                setTimeout(() => {
                    resultsDiv.scrollIntoView({ behavior: "smooth" });
                }, 100);
            }

            function restartQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                userSelection = null;
                questionsShuffled = shuffle([...questions]);
                document.getElementById("quiz-area").classList.remove("hidden");

                const resultsDiv = document.getElementById("results");
                resultsDiv.classList.add("hidden");
                resultsDiv.classList.remove("entering", "high-score-glow");

                document.getElementById("main-btn").onclick =
                    checkAnswerAndProceed;
                renderQuestion();
            }

            window.onload = function () {
                document.getElementById("total-q-number").textContent =
                    questions.length;
                questionsShuffled = shuffle([...questions]);
                renderQuestion();
            };
        </script>
    </body>
</html>
