<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/quiz_icon.svg" type="image/x-icon" />
        <title>
            Quiz de latin - Jules César et l'apogée de la République Romaine
        </title>
        <style>
            /* ----------------------------------------------------
           ANIMATIONS (KEYFRAMES)
           ---------------------------------------------------- */
            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideOut {
                from {
                    opacity: 1;
                    transform: translateY(0);
                }
                to {
                    opacity: 0;
                    transform: translateY(-10px);
                }
            }

            @keyframes headerDrop {
                from {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                    box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
                }
                50% {
                    transform: scale(1.02);
                    box-shadow: 0 8px 20px rgba(76, 81, 191, 0.5);
                }
                100% {
                    transform: scale(1);
                    box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
                }
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            @keyframes resultsEntry {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes bounce {
                0%,
                20%,
                50%,
                80%,
                100% {
                    transform: translateY(0);
                }
                40% {
                    transform: translateY(-5px);
                }
                60% {
                    transform: translateY(-3px);
                }
            }

            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                20%,
                60% {
                    transform: translateX(-5px);
                }
                40%,
                80% {
                    transform: translateX(5px);
                }
            }

            @keyframes glowCorrect {
                0% {
                    box-shadow: 0 0 5px #68d391;
                }
                50% {
                    box-shadow: 0 0 20px #48bb78;
                }
                100% {
                    box-shadow: 0 0 5px #68d391;
                }
            }

            @keyframes zoomFeedback {
                0% {
                    transform: scale(0.9);
                    opacity: 0;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            @keyframes couleur-qui-change {
                0%,
                10% {
                    color: white;
                }
                30% {
                    color: #00ff00;
                }
                38% {
                    color: #ffff00;
                }
                46% {
                    color: #ff00ff;
                }
                54% {
                    color: #00ffff;
                }
                60% {
                    color: #ffa500;
                }
                68% {
                    color: #7cfc00;
                }
                76% {
                    color: #ff69b4;
                }
                84% {
                    color: #8a2be2;
                }
                92% {
                    color: #ff4500;
                }
                100% {
                    color: deeppink;
                }
            }

            @keyframes rotate {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }

            @keyframes flicker {
                0%,
                100% {
                    opacity: 1;
                }
                5%,
                25%,
                45%,
                65%,
                85% {
                    opacity: 0.85;
                }
                10%,
                30%,
                50%,
                70%,
                90% {
                    opacity: 1;
                }
            }

            @keyframes wipe-in {
                from {
                    clip-path: inset(0 100% 0 0);
                }
                to {
                    clip-path: inset(0 0 0 0);
                }
            }

            @keyframes border-fade {
                0% {
                    border-color: #3182ce;
                }
                33% {
                    border-color: #48bb78;
                }
                66% {
                    border-color: #f6ad55;
                }
                100% {
                    border-color: #3182ce;
                }
            }

            @keyframes clignotement-leger {
                0%,
                100% {
                    color: red;
                    opacity: 1;
                }
                50% {
                    color: orange;
                    opacity: 0.7;
                }
            }

            /* ----------------------------------------------------
           STYLE GÉNÉRAL
           ---------------------------------------------------- */
            body {
                font-family: Arial, Helvetica, sans-serif;
                background-color: #f0f4f8;
                padding: 1rem;
                line-height: 1.6;
                min-height: 100vh;
            }

            @media (min-width: 768px) {
                body {
                    padding: 2rem;
                }
            }

            .quiz-container {
                max-width: 800px;
                margin: 2rem auto;
                padding: 2rem;
                background: #ffffff;
                border-radius: 20px;
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            }

            .header {
                text-align: center;
                margin-bottom: 2rem;
            }

            .header h1 {
                font-size: 2rem;
                font-weight: 700;
                color: #1a202c;
                margin-bottom: 0.5rem;
                animation: headerDrop 0.8s ease-out;
            }

            .header p {
                color: #4a5568;
                font-size: 1.125rem;
                font-weight: 500;
            }

            .question-card {
                min-height: 250px;
                padding: 1.5rem;
                margin-bottom: 1.5rem;
                border-radius: 15px;
                background-color: #f7faff;
                border: 2px solid #e2e8f0;
                transition:
                    opacity 0.3s ease,
                    transform 0.3s ease;
            }

            .question-card.entering {
                animation: slideIn 0.5s ease-out forwards;
            }

            .question-card.fast-exit {
                animation: slideOut 0.25s ease-in forwards; /* Rapide pour le succès */
            }
            .question-card.slow-exit {
                animation: slideOut 0.8s ease-in forwards; /* Lent pour l'échec */
            }

            .question-text {
                font-size: 1.3rem;
                font-weight: 700;
                margin-bottom: 1.5rem;
                color: #2d3748;
            }

            .options-container {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .answer-btn {
                display: block;
                width: 100%;
                padding: 1rem 1.25rem;
                text-align: left;
                border-radius: 10px;
                transition: all 0.2s ease-out;
                font-weight: 600;
                border: 1px solid #c3dafe;
                color: #2b6cb0;
                background-color: #ebf4ff;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            }

            .answer-btn:hover:not(.selected):not(.correct):not(.incorrect) {
                background-color: #cee0f2;
                transform: translateY(-1px);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }

            .selected {
                background-color: #3182ce;
                border-color: #2c5282;
                color: white;
                transform: scale(1.01);
                box-shadow: 0 5px 15px rgba(49, 130, 206, 0.4);
            }

            .correct {
                background-color: #48bb78 !important;
                border-color: #2f855a !important;
                color: white !important;
                box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
                pointer-events: none;
                animation: bounce 0.6s ease-out;
            }

            .incorrect {
                background-color: #f56565 !important;
                border-color: #c53030 !important;
                color: white !important;
                box-shadow: 0 5px 15px rgba(245, 101, 101, 0.4);
                pointer-events: none;
                animation: shake 0.5s ease-in-out;
            }

            #feedback-area {
                margin-top: 1rem;
                padding: 1rem;
                border-radius: 10px;
                font-weight: 600;
                text-align: center;
                animation: zoomFeedback 0.4s
                    cubic-bezier(0.68, -0.55, 0.27, 1.55);
            }

            .feedback-correct {
                background-color: #e6fffa;
                color: #38a169;
                border: 1px solid #48bb78;
            }

            .feedback-incorrect {
                background-color: #fff5f5;
                color: #e53e3e;
                border: 1px solid #f56565;
            }
            .main-btn-container {
                margin-top: 2.5rem;
                display: flex;
                justify-content: center;
            }

            #main-btn {
                background-color: #4c51bf;
                color: white;
                padding: 1rem 2.5rem;
                border-radius: 12px;
                font-weight: 800;
                font-size: 1.1rem;
                transition:
                    background-color 0.3s,
                    transform 0.2s,
                    box-shadow 0.3s;
                width: 100%;
                border: none;
                cursor: pointer;
                box-shadow: 0 5px 15px rgba(76, 81, 191, 0.3);
            }

            @media (min-width: 768px) {
                #main-btn {
                    width: auto;
                }
            }

            #main-btn:hover:not(:disabled) {
                background-color: #3a4294;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(76, 81, 191, 0.4);
            }

            #main-btn:active:not(:disabled) {
                animation: pulse 0.3s ease;
            }

            #main-btn:disabled {
                background-color: #a0aec0;
                cursor: not-allowed;
                box-shadow: none;
            }

            #results {
                margin-top: 2.5rem;
                padding: 2rem;
                background-color: #f0fff4;
                border: 2px solid #68d391;
                border-radius: 15px;
                text-align: center;
            }

            #results.entering {
                animation: resultsEntry 0.6s ease-out forwards;
            }

            .high-score-glow {
                animation: glowCorrect 2s infinite alternate;
            }

            #results h2 {
                font-size: 1.8rem;
                font-weight: 700;
                color: #2f855a;
                margin-bottom: 1rem;
            }

            #score-display {
                font-size: 1.4rem;
                font-weight: 600;
                margin-bottom: 0.75rem;
                color: #38a169;
            }

            #feedback-message {
                font-size: 1.1rem;
                color: #4c51bf;
            }

            #results button {
                margin-top: 1.5rem;
                padding: 0.75rem 2rem;
                background-color: #48bb78;
                color: white;
                border-radius: 10px;
                font-weight: 700;
                transition: background-color 0.2s;
                border: none;
                cursor: pointer;
            }

            #results button:hover {
                background-color: #38a169;
            }

            .hidden {
                display: none;
            }

            .couleur-qui-change {
                animation: couleur-qui-change 14s infinite alternate;
                font-weight: bold;
            }

            .anim-rotate {
                animation: rotate 5s linear infinite;
            }

            .anim-flicker {
                animation: flicker 0.15s linear infinite alternate;
            }

            .anim-wipe-in {
                animation: wipe-in 1s ease-out forwards;
            }

            .anim-border-fade {
                border: 3px solid transparent;
                animation: border-fade 3s ease-in-out infinite;
            }

            .clignotant {
                animation: clignotement-leger 1.5s infinite ease-in-out;
            }
        </style>
    </head>
    <body>
        <div class="quiz-container anim-border-fade">
            <header class="header">
                <h1>
                    Quiz <span class="couleur-qui-change">de Latin</span> :
                    <span class="clignotant">66</span> Questions sur <br />
                    - Jules César et l'apogée de la République Romaine
                </h1>
                <p>
                    Question <span id="current-q-number">1</span> /
                    <span id="total-q-number">50</span>
                </p>
            </header>

            <div id="quiz-area" class="anim-wipe-in">
                <div id="current-question-card" class="question-card"></div>

                <div id="feedback-area" class="hidden"></div>

                <div class="main-btn-container">
                    <button id="main-btn" onclick="checkAnswerAndProceed()">
                        Valider la Réponse
                    </button>
                </div>
            </div>

            <div id="results" class="hidden">
                <h2 class="anim-flicker">Quiz Terminé !</h2>
                <p id="score-display"></p>
                <p id="feedback-message"></p>
                <button onclick="restartQuiz()">Recommencer le Quiz</button>
            </div>
        </div>

        <script>
            // --- DATA: ---
            const questions = [
                {
                    q: "Date : Quand Jules César est-il né ?",
                    answers: ["100 av. J.-C.", "70 av. J.-C.", "44 av. J.-C."],
                    correct: "100 av. J.-C.",
                },
                {
                    q: "Moment historique : Quelle fonction César obtient-il en 63 av. J.-C. ?",
                    answers: [
                        "Consul",
                        "Proconsul en Gaule",
                        "Pontifex Maximus (Grand Prêtre)",
                    ],
                    correct: "Pontifex Maximus (Grand Prêtre)",
                },
                {
                    q: "Terme : Premier Triumvirat",
                    answers: [
                        "Une alliance militaire officielle",
                        "Une alliance politique secrète entre César, Pompée et Crassus (formée vers 60 av. J.-C.)",
                        "Un conseil de trois sénateurs",
                    ],
                    correct:
                        "Une alliance politique secrète entre César, Pompée et Crassus (formée vers 60 av. J.-C.)",
                },
                {
                    q: "Fonction : César est Consul pour la première fois en quelle année ?",
                    answers: ["63 av. J.-C.", "59 av. J.-C.", "51 av. J.-C."],
                    correct: "59 av. J.-C.",
                },
                {
                    q: "Campagne : Quelle région devient sa province après son consulat, lui permettant d'acquérir une gloire militaire ?",
                    answers: [
                        "L'Espagne",
                        "La Gaule (Cisalpine, Transalpine et Illyrie)",
                        "L'Asie Mineure",
                    ],
                    correct: "La Gaule (Cisalpine, Transalpine et Illyrie)",
                },
                {
                    q: "Événement : Que symbolise le franchissement du Rubicon en janvier 49 av. J.-C. ?",
                    answers: [
                        "La fin de la Guerre des Gaules",
                        "Le début de la guerre civile contre Pompée et le Sénat",
                        "La fondation d'une nouvelle colonie",
                    ],
                    correct:
                        "Le début de la guerre civile contre Pompée et le Sénat",
                },
                {
                    q: "Bataille : Où César vainc-t-il définitivement Pompée en 48 av. J.-C. ?",
                    answers: ["Alésia", "Pharsale (en Grèce)", "Zela"],
                    correct: "Pharsale (en Grèce)",
                },
                {
                    q: "Terme : 'Alea jacta est'",
                    answers: [
                        "'Le sort est jeté' (phrase attribuée à César au Rubicon)",
                        "'Je suis venu, j'ai vu, j'ai vaincu'",
                        "'Et toi aussi, mon fils'",
                    ],
                    correct:
                        "'Le sort est jeté' (phrase attribuée à César au Rubicon)",
                },
                {
                    q: "Événement : Que signifie la phrase 'Veni, Vidi, Vici' ?",
                    answers: [
                        "Sa victoire sur Pompée",
                        "Sa victoire rapide contre Pharnace II à Zela en 47 av. J.-C.",
                        "Sa conquête de l'Égypte",
                    ],
                    correct:
                        "Sa victoire rapide contre Pharnace II à Zela en 47 av. J.-C.",
                },
                {
                    q: "Personnage : Qui était Cléopâtre pour César ?",
                    answers: [
                        "Sa sœur",
                        "La reine d'Égypte et sa maîtresse",
                        "Une Vestale",
                    ],
                    correct: "La reine d'Égypte et sa maîtresse",
                },
                {
                    q: "Bataille : Quel est le nom du siège où Vercingétorix capitule face à César en 52 av. J.-C. ?",
                    answers: ["Gergovie", "Alésia", "Carrhes"],
                    correct: "Alésia",
                },
                {
                    q: "Titre : Quel titre obtient César en 44 av. J.-C., qui a inquiété le Sénat ?",
                    answers: [
                        "Roi",
                        "Dictateur à vie (Dictator Perpetuo)",
                        "Consul annuel",
                    ],
                    correct: "Dictateur à vie (Dictator Perpetuo)",
                },
                {
                    q: "Terme : Idus de Mars",
                    answers: [
                        "Le 15 mai",
                        "Le 15 mars, date de l'assassinat de César",
                        "Le 1er mars",
                    ],
                    correct: "Le 15 mars, date de l'assassinat de César",
                },
                {
                    q: "Moment historique : Où César est-il assassiné ?",
                    answers: [
                        "Au Forum Romain",
                        "Dans le Sénat, près de la statue de Pompée",
                        "Dans sa maison sur le Palatin",
                    ],
                    correct: "Dans le Sénat, près de la statue de Pompée",
                },
                {
                    q: "Personnage : Quel conjuré, qu'il considérait comme son fils spirituel, aurait prononcé 'Tu quoque mi fili' ?",
                    answers: ["Marc Antoine", "Marcus Junius Brutus", "Octave"],
                    correct: "Marcus Junius Brutus",
                },
                {
                    q: "Conséquence : Quel événement suit l'assassinat de César ?",
                    answers: [
                        "La restauration immédiate de la République",
                        "Une nouvelle guerre civile et la formation du Second Triumvirat",
                        "La paix avec la Gaule",
                    ],
                    correct:
                        "Une nouvelle guerre civile et la formation du Second Triumvirat",
                },
                {
                    q: "Terme : Testament de César",
                    answers: [
                        "Il désignait Brutus comme son héritier principal",
                        "Il désignait son petit-neveu, Octave, comme son héritier principal",
                        "Il laissait tout à Cléopâtre",
                    ],
                    correct:
                        "Il désignait son petit-neveu, Octave, comme son héritier principal",
                },
                {
                    q: "Réforme : Quel calendrier, encore à la base du nôtre, César a-t-il instauré en 45 av. J.-C. ?",
                    answers: [
                        "Le calendrier Grégorien",
                        "Le calendrier Lunaire Romain",
                        "Le calendrier Julien",
                    ],
                    correct: "Le calendrier Julien",
                },
                {
                    q: "Réforme : Quelle loi agraire populaire César met-il en place pendant son consulat de 59 av. J.-C. ?",
                    answers: [
                        "Distribution de terre aux citoyens pauvres et aux vétérans",
                        "Abolition des dettes",
                        "Augmentation des impôts sénatoriaux",
                    ],
                    correct:
                        "Distribution de terre aux citoyens pauvres et aux vétérans",
                },
                {
                    q: "Titre : Quel titre posthume Octave a-t-il obtenu, faisant de César une divinité ?",
                    answers: [
                        "Pontifex Maximus",
                        "Divus Julius (Jules le Divin)",
                        "Imperator",
                    ],
                    correct: "Divus Julius (Jules le Divin)",
                },
                {
                    q: "Terme : Triumvir",
                    answers: [
                        "Le chef de trois légions",
                        "Chacun des trois hommes (César, Pompée, Crassus ou Octave, Antoine, Lépide) qui formaient le Triumvirat",
                        "Un magistrat militaire",
                    ],
                    correct:
                        "Chacun des trois hommes (César, Pompée, Crassus ou Octave, Antoine, Lépide) qui formaient le Triumvirat",
                },
                {
                    q: "Fonction : Que devient Pompée après la rupture du Triumvirat ?",
                    answers: [
                        "Chef de la marine romaine",
                        "Seul Consul et chef des forces sénatoriales contre César",
                        "Gouverneur de Gaule",
                    ],
                    correct:
                        "Seul Consul et chef des forces sénatoriales contre César",
                },
                {
                    q: "Personnage : Marc Antoine",
                    answers: [
                        "Un des conjurés de César",
                        "Un lieutenant et fidèle allié de César, puis membre du Second Triumvirat",
                        "L'historien de la Guerre des Gaules",
                    ],
                    correct:
                        "Un lieutenant et fidèle allié de César, puis membre du Second Triumvirat",
                },
                {
                    q: "Bataille : Où Pompée est-il assassiné après sa défaite contre César ?",
                    answers: ["En Gaule", "En Égypte", "En Hispanie"],
                    correct: "En Égypte",
                },
                {
                    q: "Terme : Clientélisme",
                    answers: [
                        "L'art de la guerre chez les Romains",
                        "Le système de patronage où César échangeait faveurs et argent contre le soutien politique et militaire",
                        "Un impôt provincial",
                    ],
                    correct:
                        "Le système de patronage où César échangeait faveurs et argent contre le soutien politique et militaire",
                },
                {
                    q: "Terme : Imperium",
                    answers: [
                        "Le titre d'Empereur",
                        "Le pouvoir suprême de commander les armées et de faire appliquer la loi (détenu par les Consuls)",
                        "Un serment d'allégeance",
                    ],
                    correct:
                        "Le pouvoir suprême de commander les armées et de faire appliquer la loi (détenu par les Consuls)",
                },
                {
                    q: "Unité : Combien de légions César avait-il en Gaule au sommet de sa puissance ?",
                    answers: [
                        "5 légions",
                        "Jusqu'à 10 légions",
                        "Plus de 15 légions",
                    ],
                    correct: "Plus de 15 légions",
                },
                {
                    q: "Bataille : Quel chef gaulois défendit Gergovie avec succès contre César (avant Alésia) ?",
                    answers: ["Dumnorix", "Vercingétorix", "Ambiorix"],
                    correct: "Vercingétorix",
                },
                {
                    q: "Événement : Quelle catastrophe naturelle détruisit la bibliothèque d'Alexandrie lors de la campagne de César en Égypte ?",
                    answers: [
                        "Un tremblement de terre",
                        "Un incendie accidentel",
                        "Une inondation",
                    ],
                    correct: "Un incendie accidentel",
                },
                {
                    q: "Titre : Comment appelait-on la cavalerie personnelle de César, composée de Germains et de Gaulois ?",
                    answers: [
                        "Garde Prétorienne",
                        "La cavalerie gauloise",
                        "Garde Celtique",
                    ],
                    correct: "La cavalerie gauloise",
                },
                {
                    q: "Terme : Clemency (Clémence)",
                    answers: [
                        "La sévérité de César",
                        "La politique de pardon adoptée par César envers ses ennemis politiques (contraire aux proscriptions)",
                        "Une taxe de guerre",
                    ],
                    correct:
                        "La politique de pardon adoptée par César envers ses ennemis politiques (contraire aux proscriptions)",
                },
                {
                    q: "Réforme : Quelle réforme sociale majeure a-t-il entreprise en faveur de la Plèbe (les pauvres) ?",
                    answers: [
                        "L'abolition de l'esclavage",
                        "Des distributions gratuites de blé et des projets de construction pour l'emploi",
                        "La réduction de la durée du service militaire",
                    ],
                    correct:
                        "Des distributions gratuites de blé et des projets de construction pour l'emploi",
                },
                {
                    q: "Terme : Proscription",
                    answers: [
                        "Une liste d'ennemis politiques établie par Sylla et d'autres, dont les biens étaient confisqués et les vies menacées (César l'a évitée jeune)",
                        "Une loi agraire",
                        "Une taxe de luxe",
                    ],
                    correct:
                        "Une liste d'ennemis politiques établie par Sylla et d'autres, dont les biens étaient confisqués et les vies menacées (César l'a évitée jeune)",
                },
                {
                    q: "Terme : Aedile",
                    answers: [
                        "Un grade militaire",
                        "Un magistrat en charge de l'entretien des édifices publics et des jeux à Rome (fonction occupée par César en 65 av. J.-C.)",
                        "Un juge",
                    ],
                    correct:
                        "Un magistrat en charge de l'entretien des édifices publics et des jeux à Rome (fonction occupée par César en 65 av. J.-C.)",
                },
                {
                    q: "Terme : Questeur",
                    answers: [
                        "Le premier poste du Cursus Honorum, en charge des finances publiques (occupé par César en 69 av. J.-C.)",
                        "Le chef des espions",
                        "Un ambassadeur",
                    ],
                    correct:
                        "Le premier poste du Cursus Honorum, en charge des finances publiques (occupé par César en 69 av. J.-C.)",
                },
                {
                    q: "Terme : Cursus Honorum",
                    answers: [
                        "Le chemin légal des honneurs (la carrière politique) pour les citoyens romains",
                        "Le code de lois militaire",
                        "Le chemin emprunté pour les Triomphes",
                    ],
                    correct:
                        "Le chemin légal des honneurs (la carrière politique) pour les citoyens romains",
                },
                {
                    q: "Lieu : Quel est le nom du nouveau forum que César a fait construire à Rome pour soulager l'ancien ?",
                    answers: [
                        "Le Forum de Trajan",
                        "Le Forum de César",
                        "Le Forum Augustum",
                    ],
                    correct: "Le Forum de César",
                },
                {
                    q: "Titre : Imperator",
                    answers: [
                        "Un titre religieux",
                        "Un titre honorifique donné par les troupes à leur général après une victoire (origine du mot Empereur)",
                        "Le chef de la marine",
                    ],
                    correct:
                        "Un titre honorifique donné par les troupes à leur général après une victoire (origine du mot Empereur)",
                },
                {
                    q: "Bataille : Quel fut le dernier champ de bataille de la Guerre des Gaules ?",
                    answers: ["Alésia", "Gergovie", "Lutèce"],
                    correct: "Alésia",
                },
                {
                    q: "Personnage : Marcus Calpurnius Bibulus",
                    answers: [
                        "Un allié de César",
                        "Le collègue anti-césarien de César lors de son premier consulat, souvent ridiculisé",
                        "Un des conjurés",
                    ],
                    correct:
                        "Le collègue anti-césarien de César lors de son premier consulat, souvent ridiculisé",
                },
                {
                    q: "Terme : Legatus (Légat)",
                    answers: [
                        "Un soldat de base",
                        "Le lieutenant général, nommé par César pour commander une légion ou une partie de la province",
                        "Un ambassadeur gaulois",
                    ],
                    correct:
                        "Le lieutenant général, nommé par César pour commander une légion ou une partie de la province",
                },
                {
                    q: "Terme : Commentarii",
                    answers: [
                        "Des poèmes",
                        "Les récits écrits par César lui-même sur ses campagnes (Guerre des Gaules, Guerre civile)",
                        "Des décrets de loi",
                    ],
                    correct:
                        "Les récits écrits par César lui-même sur ses campagnes (Guerre des Gaules, Guerre civile)",
                },
                {
                    q: "Allié : Qui fut son premier beau-père, figure des Populares, qui l'a soutenu au début de sa carrière ?",
                    answers: ["Pompée", "Cinna", "Sylla"],
                    correct: "Cinna",
                },
                {
                    q: "Terme : Dilectus",
                    answers: [
                        "Le droit de vote",
                        "La levée de nouvelles troupes et le recrutement des légions",
                        "La distribution de blé",
                    ],
                    correct:
                        "La levée de nouvelles troupes et le recrutement des légions",
                },
                {
                    q: "Moment historique : Quand a eu lieu la première invasion de la Bretagne par César ?",
                    answers: ["58 av. J.-C.", "55 av. J.-C.", "46 av. J.-C."],
                    correct: "55 av. J.-C.",
                },
                {
                    q: "Loi : Qu'est-ce que la Lex Julia Municipalis ?",
                    answers: [
                        "Une loi sur le mariage",
                        "Une loi visant à réorganiser l'administration des villes italiennes, promulguée par César",
                        "Une loi sur la citoyenneté",
                    ],
                    correct:
                        "Une loi visant à réorganiser l'administration des villes italiennes, promulguée par César",
                },
                {
                    q: "Titre : Pater Patriae",
                    answers: [
                        "Un titre honorifique signifiant 'Père de la Patrie' (décerné à César puis à Auguste)",
                        "Chef de l'armée",
                        "Le plus ancien sénateur",
                    ],
                    correct:
                        "Un titre honorifique signifiant 'Père de la Patrie' (décerné à César puis à Auguste)",
                },
                {
                    q: "Personnage : Qui était l'historien grec qui a écrit une biographie de César ?",
                    answers: ["Tite-Live", "Plutarque", "Salluste"],
                    correct: "Plutarque",
                },
                {
                    q: "Terme : Pro Praetore",
                    answers: [
                        "Un Consul",
                        "Le titre d'un ancien préteur, souvent gouverneur d'une province après son mandat",
                        "Un officier de marine",
                    ],
                    correct:
                        "Le titre d'un ancien préteur, souvent gouverneur d'une province après son mandat",
                },
                {
                    q: "Bataille : Quel fut le dernier bastion des Pompéiens vaincu par César en 45 av. J.-C. ?",
                    answers: ["Thapsus", "Munda (en Espagne)", "Pharsale"],
                    correct: "Munda (en Espagne)",
                },
                {
                    q: "Bataille : Quelle bataille César a-t-il remportée contre les Pompéiens en Afrique en 46 av. J.-C. ?",
                    answers: ["Thapsus", "Munda", "Aleria"],
                    correct: "Thapsus",
                },
                {
                    q: "Terme : Auspices",
                    answers: [
                        "Les lois du Sénat",
                        "La consultation des présages divins par des prêtres avant les décisions importantes (politiques ou militaires)",
                        "Le budget de l'État",
                    ],
                    correct:
                        "La consultation des présages divins par des prêtres avant les décisions importantes (politiques ou militaires)",
                },
                {
                    q: "Personnage : Lépide",
                    answers: [
                        "Un général gaulois",
                        "Le troisième membre du Second Triumvirat avec Octave et Marc Antoine",
                        "Un des conjurés",
                    ],
                    correct:
                        "Le troisième membre du Second Triumvirat avec Octave et Marc Antoine",
                },
                {
                    q: "Terme : Legio X Equestris",
                    answers: [
                        "Le nom d'un navire",
                        "La fameuse 10e Légion de César, son unité d'élite et favorite",
                        "Une unité de cavalerie",
                    ],
                    correct:
                        "La fameuse 10e Légion de César, son unité d'élite et favorite",
                },
                {
                    q: "Réforme : Quel mois du calendrier romain a été nommé en l'honneur de Jules César ?",
                    answers: ["Mars", "Juillet (Julius)", "Août"],
                    correct: "Juillet (Julius)",
                },
                {
                    q: "Terme : Civitas",
                    answers: [
                        "Le droit de vote",
                        "Le concept de citoyenneté (ensemble des citoyens)",
                        "La religion romaine",
                    ],
                    correct:
                        "Le concept de citoyenneté (ensemble des citoyens)",
                },
                {
                    q: "Lieu : Quel fleuve en Gaule César a-t-il franchi pour la première fois lors de sa campagne ?",
                    answers: ["Le Rhin", "Le Rhône", "La Seine"],
                    correct: "Le Rhône",
                },
                {
                    q: "Terme : Optimates",
                    answers: [
                        "La faction politique conservatrice du Sénat, opposée à César et aux Populares",
                        "Les soldats d'élite de César",
                        "Les alliés de César",
                    ],
                    correct:
                        "La faction politique conservatrice du Sénat, opposée à César et aux Populares",
                },
                {
                    q: "Terme : Populares",
                    answers: [
                        "La faction politique réformatrice qui cherchait le soutien du peuple (soutenue par César)",
                        "Les esclaves en révolte",
                        "Les généraux les plus anciens",
                    ],
                    correct:
                        "La faction politique réformatrice qui cherchait le soutien du peuple (soutenue par César)",
                },
                {
                    q: "Événement : Qui a été nommé Dictateur par Sylla avant que César ne commence sa carrière ?",
                    answers: [
                        "Marius",
                        "Crassus",
                        "Sylla lui-même (Dictateur pour réformer la République)",
                    ],
                    correct:
                        "Sylla lui-même (Dictateur pour réformer la République)",
                },
                {
                    q: "Terme : Tribunus Plebis",
                    answers: [
                        "Un officier de légion",
                        "Un magistrat sacré qui défendait les droits de la plèbe (le peuple)",
                        "Un prêtre",
                    ],
                    correct:
                        "Un magistrat sacré qui défendait les droits de la plèbe (le peuple)",
                },
                {
                    q: "Terme : Désertion",
                    answers: [
                        "La trahison d'un allié politique",
                        "L'abandon du champ de bataille ou de l'armée par un soldat, puni sévèrement",
                        "Le fait de gagner une bataille",
                    ],
                    correct:
                        "L'abandon du champ de bataille ou de l'armée par un soldat, puni sévèrement",
                },
                {
                    q: "Terme : Sesterce",
                    answers: [
                        "Un type de navire romain",
                        "La principale unité monétaire de Rome",
                        "Un poids de blé",
                    ],
                    correct: "La principale unité monétaire de Rome",
                },
                {
                    q: "Terme : Aureus",
                    answers: [
                        "Une pièce d'argent",
                        "Une pièce d'or introduite ou stabilisée par César, portant souvent son effigie",
                        "Une médaille honorifique",
                    ],
                    correct:
                        "Une pièce d'or introduite ou stabilisée par César, portant souvent son effigie",
                },
                {
                    q: "Personnage : Qui était Servilia Caepionis, la mère de Brutus et maîtresse de César ?",
                    answers: [
                        "Une princesse gauloise",
                        "Une matrone romaine de haute lignée et influente",
                        "Une esclave affranchie",
                    ],
                    correct: "Une matrone romaine de haute lignée et influente",
                },
                {
                    q: "Terme : Invasion",
                    answers: [
                        "Le fait de demander l'autorisation de voyager",
                        "L'entrée en force sur un territoire ennemi (ex: les deux invasions de Bretagne par César)",
                        "Un vote du Sénat",
                    ],
                    correct:
                        "L'entrée en force sur un territoire ennemi (ex: les deux invasions de Bretagne par César)",
                },
            ];

            let currentQuestionIndex = 0;
            let score = 0;
            let userSelection = null;
            let questionsShuffled = [];
            let quizInProgress = false;

            // Fonction pour mélanger un tableau (Algorithme de Fisher-Yates)
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // Affiche la question actuelle
            function renderQuestion() {
                if (currentQuestionIndex >= questionsShuffled.length) {
                    showResults();
                    return;
                }

                const q = questionsShuffled[currentQuestionIndex];
                const card = document.getElementById("current-question-card");
                const questionNumber = currentQuestionIndex + 1;

                card.classList.remove("slow-exit", "fast-exit");
                card.classList.add("entering");

                document.getElementById("current-q-number").textContent =
                    questionNumber;
                document.getElementById("total-q-number").textContent =
                    questionsShuffled.length;
                document.getElementById("main-btn").textContent =
                    "Valider la Réponse";
                document.getElementById("main-btn").disabled = true;

                card.innerHTML = `
                <p class="question-text">${q.q}</p>
                <div id="options-container" class="options-container">
                    <!-- Options de réponse -->
                </div>
            `;

                document
                    .getElementById("feedback-area")
                    .classList.add("hidden");
                document
                    .getElementById("feedback-area")
                    .classList.remove("feedback-correct", "feedback-incorrect");
                userSelection = null;
                quizInProgress = true;

                const optionsContainer =
                    card.querySelector("#options-container");
                const shuffledAnswers = shuffle([...q.answers]);

                shuffledAnswers.forEach((answer) => {
                    const button = document.createElement("button");
                    button.type = "button";
                    button.className = "answer-btn";
                    button.setAttribute("data-answer", answer);
                    button.textContent = answer;
                    button.onclick = function () {
                        selectAnswer(answer, button);
                    };
                    optionsContainer.appendChild(button);
                });

                setTimeout(() => {
                    card.classList.remove("entering");
                }, 500);
            }

            function selectAnswer(answer, clickedButton) {
                if (!quizInProgress) return;

                const optionsContainer =
                    document.getElementById("options-container");
                optionsContainer
                    .querySelectorAll(".answer-btn")
                    .forEach((btn) => {
                        btn.classList.remove("selected");
                    });

                clickedButton.classList.add("selected");

                userSelection = answer;
                document.getElementById("main-btn").disabled = false;
            }

            function checkAnswerAndProceed() {
                if (userSelection === null || !quizInProgress) return;

                quizInProgress = false;
                document.getElementById("main-btn").disabled = true;

                const q = questionsShuffled[currentQuestionIndex];
                const isCorrect = userSelection === q.correct;
                const feedbackArea = document.getElementById("feedback-area");
                const optionsContainer =
                    document.getElementById("options-container");
                const card = document.getElementById("current-question-card");

                feedbackArea.classList.remove("hidden");

                optionsContainer
                    .querySelectorAll(".answer-btn")
                    .forEach((btn) => {
                        const answer = btn.getAttribute("data-answer");
                        btn.classList.remove("selected");

                        if (answer === q.correct) {
                            btn.classList.add("correct");
                        } else if (answer === userSelection && !isCorrect) {
                            btn.classList.add("incorrect");
                        }
                    });

                feedbackArea.classList.remove(
                    "feedback-correct",
                    "feedback-incorrect",
                );

                if (isCorrect) {
                    score++;
                    feedbackArea.textContent =
                        "Bravo ! Réponse correcte. Prochaine question rapidement !";
                    feedbackArea.classList.add("feedback-correct");
                    card.classList.add("fast-exit");
                } else {
                    feedbackArea.textContent = `Faux. La bonne réponse était : ${q.correct}. Prenez le temps de réfléchir.`;
                    feedbackArea.classList.add("feedback-incorrect");
                    card.classList.add("slow-exit");
                }

                // Déterminer la durée du délai de transition
                const delayDuration = isCorrect ? 500 : 3000;

                document.getElementById("main-btn").textContent =
                    "Question Suivante";

                setTimeout(() => {
                    currentQuestionIndex++;

                    if (currentQuestionIndex >= questionsShuffled.length) {
                        document.getElementById("main-btn").textContent =
                            "Voir les Résultats";
                        document.getElementById("main-btn").onclick =
                            showResults;
                        document.getElementById("main-btn").disabled = false;
                    } else {
                        renderQuestion();
                        document.getElementById("main-btn").onclick =
                            checkAnswerAndProceed;
                    }
                }, delayDuration);
            }

            function showResults() {
                document.getElementById("quiz-area").classList.add("hidden");
                const resultsDiv = document.getElementById("results");
                const totalQuestions = questionsShuffled.length;
                const percentage = Math.round((score / totalQuestions) * 100);

                document.getElementById("score-display").textContent =
                    `Votre score final est de ${score} / ${totalQuestions} (${percentage}%)`;

                let feedbackMsg = "";
                resultsDiv.classList.remove("high-score-glow");

                if (percentage === 100) {
                    feedbackMsg =
                        "Félicitations ! Maîtrise parfaite de la génétique. Vous êtes prêt(e) !";
                    resultsDiv.classList.add("high-score-glow");
                } else if (percentage >= 80) {
                    feedbackMsg =
                        "Excellent travail ! Vous avez une très bonne compréhension des notions.";
                    resultsDiv.classList.add("high-score-glow");
                } else if (percentage >= 60) {
                    feedbackMsg =
                        "Bon effort ! Revoyez les thèmes où vous avez eu le plus d'erreurs.";
                } else {
                    feedbackMsg =
                        "N'abandonnez pas. Reprenez les sections I, III et V de votre fiche pour consolider les bases.";
                }
                document.getElementById("feedback-message").textContent =
                    feedbackMsg;
                resultsDiv.classList.remove("hidden");

                resultsDiv.classList.add("entering");

                setTimeout(() => {
                    resultsDiv.scrollIntoView({ behavior: "smooth" });
                }, 100);
            }

            function restartQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                userSelection = null;
                questionsShuffled = shuffle([...questions]);
                document.getElementById("quiz-area").classList.remove("hidden");

                const resultsDiv = document.getElementById("results");
                resultsDiv.classList.add("hidden");
                resultsDiv.classList.remove("entering", "high-score-glow");

                document.getElementById("main-btn").onclick =
                    checkAnswerAndProceed;
                renderQuestion();
            }

            window.onload = function () {
                document.getElementById("total-q-number").textContent =
                    questions.length;
                questionsShuffled = shuffle([...questions]);
                renderQuestion();
            };
        </script>
    </body>
</html>
